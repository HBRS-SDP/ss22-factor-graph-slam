### ROS NODE USING GTSAM

## Assumptions for this project:

  * You have a working ROS installation
  * You have a working GTSAM installation
  * You have a working catkin workspace
  * You have a working CMake installation
  * You have a working C++ compiler
  * You have a working Python 3.8 installation


Input: [Bag_file]("Sdp_factor_graphs/ros_node/src/gtsam_node/gazebo_simulation.bag")

    ROS BAG file with /tf, /odom topic

Outputs:

    extracted_data.csv
    factor_graph_data.csv
    factor_graph_sim.dot --> factor graph visualization file
    final_result_odom_vs_factor_graph.png --> final result visualization plot between raw odometry and factor graph


You can run roscore using the following command:

    roscore

You can run a rosbag file using the following command:

    rosbag play <path_to_bag_file>

You can run the ROS node using the following command:

    rosrun gtsam_node gtsam_slam.py


The Node is pre-programmed to run for 65 seconds of the rosbag file. You can change the time duration in the gtsam_slam.py file.

The Node will capture the topics /odom and /tf from the bag_file, This can also be run using Simulation/real-time (The node need to be modified and tested for real-time)

The Node is only tested with Bag file generated by Gazebo simulation

This Node will create a csv file with the following format:

    Aruco ID, x, y, z, qx, qy, qz

The Node will also create a csv file with the following format:
    
        x, y, z

Where, 

   *   x, y, z are the position of the aruco in the base frame.
   *   qx, qy, qz are the orientation of the robot in the odom frame.
   *   Aruco ID is the ID of the aruco marker.  

The Working flow of this node is discussed in [here](https://github.com/HBRS-SDP/ss22-factor-graph-slam/tree/main/gtsam)

